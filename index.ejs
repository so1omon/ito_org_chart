<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">  
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p" crossorigin="anonymous"></script>
    <link rel="stylesheet" href="css/main.css">
    <link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/gh/moonspam/NanumSquare@1.0/nanumsquare.css">
    <script src="https://code.jquery.com/jquery-1.12.4.js"></script>
    <script src="https://code.jquery.com/ui/1.12.1/jquery-ui.js"></script>
</head>
<body>
    <div id="container">
        <div class="black-background">
            <!-- 모달창 구현 -->
            <div class="white-background">
                <div class="btn-container"><button type="button" class="btn-close" aria-label="Close"></button></div>
                <div class="left-container">
                    <!-- 사진 왼쪽에 -->
                    <div class="pic">
                        
                    </div>
                    <div class="name"></div>
                
                </div>
                <div class="right-container">
                    <!-- 세부 정보 ( DB에서 가져옴 )-->
                    <!-- 이름, 사번, 휴대폰번호,사무실번호, 직위,업무분장, -->
                    <div class="detail-container">
                        <span class="tag_name fs-5" >이름</span><span class="tag_info name_tag fs-4">박소현</p>
                        <span class="tag_name fs-5" >사번</span><span class="tag_info id_tag fs-4 ">11111</p>
                        <span class="tag_name fs-5" >소속</span><span class="tag_info office_tag fs-4 ">경영지원팀</p>
                        <span class="tag_name fs-5" > 휴대폰 번호</span><span class="tag_info phone_tag fs-4">010-8422-0751</p>
                        <span class="tag_name fs-5" >사무실 번호 </span><span class="tag_info office_p_tag fs-4">032-222-2222</p>
                        <span class="tag_name fs-5" > 직위</span><span class="tag_info position_tag fs-4">인턴</p>
                        <span class="tag_name fs-5" >업무 분장 </span><span class="tag_info detail_tag fs-4">blahblaaha</p>    
                    </div>
                    
                </div>
                
                
            </div>
        </div>
        <div class="logo">
           <img src="img\logoFile.png" style="padding: 10px;">
        </div>
        <div class="main">
                <!-- 왼쪽 department-->
                <div class="office" id="first-office">
                    <div class="header fw-bold">
                        <span class="office-name fs-4">관광마케팅실</span>
                        <span class="office-head">김민혜 실장</span>
                    </div>
                    <div class="dept-container">
                        <!-- 각 팀 table -->
                        <div class="department fs-5 fw-bold " id="first-dept">
                            <span class="dept-name">해외마케팅팀</span>
                            <div class="dept-table p-2" id="first-table">
                                 <!-- 팀장 row -->
                                 <div class="row justify-content-md-center p-2" id="team-row" >
                                    <div class="border bg-light cell mr-0" id="team-leader">
                                        <!-- img 넣기 -->
                                      </div>
                                      <div class="memInfo">
                                        <span class="memName fs-6" >최영석</span>
                                        <span class="memPos fs-6" >팀장</span>
                                      </div>
                                      
                                 </div>
                                 <div class="row justify-content-md-center g-2  mr-0" id="mem-row" style="float: none; margin:100 auto;">
                                    <!-- 사람 수대로 col 삽입. 한행당 2열인 경우 --> 
                                   
                                </div>
                            </div>
                        </div>
                        <div class="department fs-5 fw-bold" id="second-dept" >
                            <span class="dept-name">국내관광팀</span>
                            <div class="dept-table p-2" id="second-table">
                                    <!-- 팀장 row -->
                                 <div class="row justify-content-md-center p-2" id="team-row" >
                                    <div class="border bg-light cell mr-0" id="team-leader">
                                        <!-- img 넣기 -->
                                      </div>
                                      <div class="memInfo">
                                        <span class="memName fs-6" >최영석</span>
                                        <span class="memPos fs-6" >팀장</span>
                                      </div>
                                      
                                 </div>
                                 <div class="row justify-content-md-center g-2 pd-2" id="mem-row"  style="float: none; margin:100 auto;">
                                    <!-- 사람 수대로 col 삽입. 한행당 2열인 경우 --> 
                                   
                                </div>

                            </div>
                        </div>
                        <div class="department fs-5 fw-bold" id="third-dept">
                            <span class="dept-name">스마트관광팀</span>
                            <div class="dept-table p-2" id="third-table">
                                    <!-- 팀장 row -->
                                 <div class="row justify-content-md-center p-2" id="team-row" >
                                    <div class="border bg-light cell mr-0" id="team-leader">
                                        <!-- img 넣기 -->
                                      </div>
                                      <div class="memInfo">
                                        <span class="memName fs-6" >최영석</span>
                                        <span class="memPos fs-6" >팀장</span>
                                      </div>
                                      
                                 </div>
                                 <div class="row justify-content-md-center g-2 pd-2" id="mem-row">
                                    <!-- 사람 수대로 col 삽입. 한행당 2열인 경우 --> 
                                   
                                </div>
                            </div>
                        </div>
                        <div class="department fs-5 fw-bold " id="last-dept">
                            <span class="dept-name">마이스뷰로</span>
                            <div class="dept-table p-2" id="last-table">
                                    <!-- 팀장 row -->
                                 <div class="row justify-content-md-center p-2" id="team-row" >
                                    <div class="border bg-light cell mr-0" id="team-leader">
                                        <!-- img 넣기 -->
                                      </div>
                                      <div class="memInfo">
                                        <span class="memName fs-6" >최영석</span>
                                        <span class="memPos fs-6" >팀장</span>
                                      </div>
                                      
                                 </div>
                                 <div class="row no-gutters justify-content-md-center g-2 pd-2" id="mem-row" >
                                    <!-- 사람 수대로 col 삽입. 한행당 2열인 경우 --> 
                                   
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <!-- 오른쪽 department -->
                <div class="office" id="second-office">
                    <div class="header fw-bold">
                        <span class="office-name fs-4">기획조정실</span>
                        <span class="office-head">이주희 실장</span>
                    </div>
                    <div class="dept-container">
                        <!-- 각 팀 table -->
                        <div class="department fs-5 fw-bold " id="first-dept">
                            <span class="dept-name">고객홍보팀</span>
                            <div class="dept-table p-2" id="first-table">
                                    <!-- 팀장 row -->
                                 <div class="row no-gutters justify-content-md-center p-2" id="team-row" >
                                    <div class="border bg-light cell mr-0" id="team-leader">
                                        <!-- img 넣기 -->
                                      </div>
                                      <div class="memInfo">
                                        <span class="memName fs-6" >최영석</span>
                                        <span class="memPos fs-6" >팀장</span>
                                      </div>
                                      
                                 </div>
                                 <div class="row no-gutters justify-content-md-center g-2 pd-3" id="mem-row" >
                                    <!-- 사람 수대로 col 삽입. 한행당 2열인 경우 --> 
                                   
                                </div>
                            </div>
                        </div>
                        <div class="department fs-5 fw-bold " id="second-dept">
                            <span class="dept-name">전략기획팀</span>
                            <div class="dept-table p-2" id="second-table">
                                    <!-- 팀장 row -->
                                 <div class="row no-gutters justify-content-md-center p-2" id="team-row" >
                                    <div class="border bg-light cell mr-0" id="team-leader">
                                        <!-- img 넣기 -->
                                      </div>
                                      <div class="memInfo">
                                        <span class="memName fs-6" >최영석</span>
                                        <span class="memPos fs-6" >팀장</span>
                                      </div>
                                      
                                 </div>
                                 <div class="row no-gutters justify-content-md-center g-2 pd-3 " id="mem-row" >
                                    <!-- 사람 수대로 col 삽입. 한행당 2열인 경우 --> 
                                   
                                </div>
                            </div>
                        </div>
                        <div class="department fs-5 fw-bold " id="last-dept">
                            <span class="dept-name">경영지원팀</span>
                            <div class="dept-table p-2" id="last-table">
                                    <!-- 팀장 row -->
                                 <div class="row no-gutters justify-content-md-center p-2" id="team-row" >
                                    <div class="border bg-light cell mr-0" id="team-leader">
                                        <!-- img 넣기 -->
                                      </div>
                                      <div class="memInfo">
                                        <span class="memName fs-6" >최영석</span>
                                        <span class="memPos fs-6" >팀장</span>
                                      </div>
                                      
                                 </div>
                                 <div class="row no-gutters justify-content-md-center g-2 pd-3" id="mem-row" >
                                    <!-- 사람 수대로 col 삽입. 한행당 2열인 경우 --> 
                                   
                                </div>
                            </div>
                        </div>
                    </div>
                </div>


        </div>
    </div>
    <script>

        //임시 dept_info(db에서 받아올 값)
        var dept_info = 
        {'해외마케팅팀':2,'국내관광팀':2,'스마트관광팀':4,
        '마이스뷰로':2,'고객홍보팀':2,'전략기획팀':2,'경영지원팀':4};

        var dept_name=[];



        $(document).ready(function(){
            
            for(var i=0;i<$('.dept-name').length;i++){
                dept_name.push($('.dept-name').eq(i).text());
            }
            console.log(dept_name); //dept_name = ['해외마케팅팀','국내관광팀','스마트관광팀','마이스뷰로,'고객홍보팀','전략기획팀','경영지원팀']

            $(document).on('click','.cell',function(){
                //클릭하면 모달창 뜸
                $('.black-background').show().animate({marginTop:'0px'});
            }); 

            // 1. 페이지 로드시 각 팀에 table 구현
            var keys = Object.keys(dept_info);
            var col_num = Object.values(dept_info); 
            console.log(keys);    //db에서 key값 가져오기
            console.log(col_num);  //db에서 value값 가져오기

            for(var i=0;i<keys.length;i++){
                //key 수 대로 돌리면서
                for(var j=0;j<$('.dept-name').length;j++){
                    if(keys[i]==$('.dept-name').eq(j).text())
                    {
                        console.log(keys[i]+'의 col 수 : '+col_num[i]);
                        var dpt = j;  //dept의 번호
                        var num = col_num[i];  
                        //$('.dept-name').eq(j).text(`${dpt}의 col수  :  ${col_num[i]}`);
                      
                        //col 수에 따라서 4*col_num[i] 의 table 구성
                        makeCell(dpt,num);
                    }
                    else{
                    }
                }
            }

            setTimeout(function(){ //30초에 한번씩 reload
                location.reload();
            }, 30000);
        })

        $('.black-background').click(function(e){
        
            // 만약 지금 실제로 클릭한 것이 black background일 때만 닫기 
            // 이벤트 리스너 안에서 쓸 수 있는 이벤트 함수
            // e.target;//지금 실제로 클릭한 요소
            // e.currentTarget; //지금 이벤트리스너가 달린 곳
            // $(this);//지금 이벤트리스너가 달린 곳
            // e.preventDefault();//기본 동작 막기
            // var className = $(e.target).attr('class');
            
            if(e.target==e.currentTarget){
              $('.black-background').hide();
    
            }
    
        });

        $('.btn-close').click(function(e){
            //close button 눌렀을 때도 닫기 
            if(e.target==e.currentTarget){
                $('.black-background').hide();
      
              }
        })


        //전체 컨테이너 width height 설정
        $('#container').css({"width": screen.width,"height":screen.height});
        


        //각 팀에 4행 col=? 로 table 구성(dept_info : {'팀이름':'col 수'})
        function makeCell(dpt_num,col_num)
        {
            //dpt_num = department의 번호
            //col_num = 열의 수
           
                for(var i=0;i<4;i++)
                {
                    for(var j=0;j<col_num;j++)
                    {

                        //이름. 직급 db에서 가져옴.
                        
                        var name = "임희복"
                        var position = "차장"

                        var info = `<div class="memInfo">
                            <span class="memName fs-6" >${name}</span>
                            <span class="memPos fs-6" >${position}</span>
                        </div>`

                        var cell = `<div class="col-${12/col_num} text-center mem" id="${i*col_num+j}" style="float: none; margin:100 auto;">
                            <div class=" border bg-light cell mr-0"></div>
                          </div>`;
                
                          console.log($('#mem-row').length);
                          $('.dept-table').children('#mem-row').eq(dpt_num).append(cell);  
                          $('.dept-table').children('#mem-row').eq(dpt_num).children('.mem').eq(i*col_num+j).append(info);
                          
                    }
                   
                }

                var total =  $('.dept-table').children('#mem-row').eq(i).children('.mem').length;
               
                //make cell이 넘어오고............


                // 이름, 직급 append
        
    
        }

        // 임시 load
        // 팀 인원수대로 cell 만드는 함수(인원수,한 row에 몇명넣을건지)
        // 한 행에 2명 넣을거면-> 12/2 = 6
        
        

    </script>
</body>
</html>